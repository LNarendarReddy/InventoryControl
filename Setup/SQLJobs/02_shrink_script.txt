USE NSRetail
GO


SELECT name ,size/128.0 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS int)/128.0 AS AvailableSpaceInMB, FILEPROPERTY(name, 'SpaceUsed') / 128.0 AS SpaceUsed
FROM sys.database_files;

ALTER DATABASE [NSRetail] SET RECOVERY SIMPLE WITH NO_WAIT
GO
DBCC SHRINKFILE ('NSRetail_Data', 10) -- FILE NAME TO BE PICKED FROM ABOVE SPACE QUERY
GO
DBCC SHRINKFILE ('NSRetail_Log', 10) -- FILE NAME TO BE PICKED FROM ABOVE SPACE QUERY
GO
ALTER DATABASE [NSRetail] SET RECOVERY FULL
GO

SELECT name ,size/128.0 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS int)/128.0 AS AvailableSpaceInMB, FILEPROPERTY(name, 'SpaceUsed') / 128.0 AS SpaceUsed
FROM sys.database_files;
